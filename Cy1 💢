-- ‚úÖ Prevent duplicates
if getgenv().CY1_GUI_LOADED then return end
getgenv().CY1_GUI_LOADED = true

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer

-- ‚ñà Main GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CY1_GUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = player:WaitForChild("PlayerGui")

-- Main Frame
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.BackgroundTransparency = 0.3
MainFrame.BorderColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.BorderSizePixel = 1
MainFrame.Active = true
MainFrame.Draggable = true
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)
MainFrame.Visible = false -- for fade-in

-- Title
local TitleBar = Instance.new("TextLabel", MainFrame)
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
TitleBar.Text = "üí¢ CY1 GUI"
TitleBar.Font = Enum.Font.GothamSemibold
TitleBar.TextSize = 18
TitleBar.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", TitleBar).CornerRadius = UDim.new(0, 10)

-- Tabs Container
local TabContainer = Instance.new("Frame", MainFrame)
TabContainer.Size = UDim2.new(1, -10, 0, 35)
TabContainer.Position = UDim2.new(0, 5, 0, 40)
TabContainer.BackgroundTransparency = 1

-- Function to create tabs
local function makeTab(text, pos)
	local b = Instance.new("TextButton", TabContainer)
	b.Size = UDim2.new(0.48, 0, 1, 0)
	b.Position = pos
	b.Text = text
	b.Font = Enum.Font.GothamSemibold
	b.TextSize = 14
	b.TextColor3 = Color3.new(1, 1, 1)
	b.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	b.BorderColor3 = Color3.fromRGB(255, 255, 255)
	b.BorderSizePixel = 1
	Instance.new("UICorner", b).CornerRadius = UDim.new(0, 6)

	b.MouseEnter:Connect(function()
		TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
	end)
	b.MouseLeave:Connect(function()
		TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(20, 20, 20)}):Play()
	end)
	return b
end

local TabBtn1 = makeTab("Tools", UDim2.new(0, 0, 0, 0))
local TabBtn2 = makeTab("Scripts", UDim2.new(0.52, 0, 0, 0))

-- Content Container
local ContentContainer = Instance.new("Frame", MainFrame)
ContentContainer.Size = UDim2.new(1, -10, 1, -90)
ContentContainer.Position = UDim2.new(0, 5, 0, 80)
ContentContainer.BackgroundTransparency = 1

-- Create Page Function
local function createPage(name)
	local page = Instance.new("ScrollingFrame", ContentContainer)
	page.Name = name
	page.Size = UDim2.new(1, 0, 1, 0)
	page.BackgroundTransparency = 1
	page.ScrollBarThickness = 3
	page.CanvasSize = UDim2.new(0, 0, 0, 0)

	local layout = Instance.new("UIListLayout", page)
	layout.Padding = UDim.new(0, 10)
	layout.SortOrder = Enum.SortOrder.LayoutOrder

	local padding = Instance.new("UIPadding", page)
	padding.PaddingTop = UDim.new(0, 5)
	padding.PaddingLeft = UDim.new(0, 5)
	padding.PaddingRight = UDim.new(0, 5)

	layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		page.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 10)
	end)
	return page
end

local PageTools = createPage("Tools")
local PageScripts = createPage("Scripts")

-- Button creation
local function createBlackButton(parent, text, callback)
	local b = Instance.new("TextButton", parent)
	b.Size = UDim2.new(1, -10, 0, 30)
	b.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	b.TextColor3 = Color3.new(1, 1, 1)
	b.Font = Enum.Font.GothamSemibold
	b.TextSize = 14
	b.Text = text
	b.BorderSizePixel = 0
	Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
	b.AutoButtonColor = false

	b.MouseEnter:Connect(function()
		TweenService:Create(b, TweenInfo.new(0.15), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)}):Play()
	end)
	b.MouseLeave:Connect(function()
		TweenService:Create(b, TweenInfo.new(0.15), {BackgroundColor3 = Color3.fromRGB(20, 20, 20)}):Play()
	end)
	if callback then b.MouseButton1Click:Connect(callback) end
	return b
end

-- Tools
createBlackButton(PageTools, "Server Hop üîÅ", function()
	print("Server Hop clicked")
end)

createBlackButton(PageTools, "Rejoin Server üîÑ", function()
	print("Rejoin clicked")
end)

createBlackButton(PageTools, "Infinite Yield üíª", function()
	print("Infinite Yield clicked")
end)

createBlackButton(PageTools, "TP Tool üß≠", function()
	print("TP Tool clicked")
end)

-- Scripts
createBlackButton(PageScripts, "Black Hole üåë", function()
	print("Black Hole script clicked")
end)

createBlackButton(PageScripts, "Disaster Alert üåßÔ∏è", function()
	print("Disaster script clicked")
end)

-- Tab switching
local function showPage(page)
	for _, child in ipairs(ContentContainer:GetChildren()) do
		if child:IsA("ScrollingFrame") then
			child.Visible = (child == page)
		end
	end
end

showPage(PageTools)
TabBtn1.MouseButton1Click:Connect(function() showPage(PageTools) end)
TabBtn2.MouseButton1Click:Connect(function() showPage(PageScripts) end)

-- Toggle Button
local ToggleButton = Instance.new("TextButton", ScreenGui)
ToggleButton.Size = UDim2.new(0, 40, 0, 40)
ToggleButton.Position = UDim2.new(0, 10, 0.5, -20)
ToggleButton.Text = "üí¢"
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.TextSize = 20
ToggleButton.TextColor3 = Color3.new(1, 1, 1)
ToggleButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
ToggleButton.BorderSizePixel = 0
Instance.new("UICorner", ToggleButton).CornerRadius = UDim.new(0, 10)

-- Fade-in animation
MainFrame.Visible = true
MainFrame.BackgroundTransparency = 1
TitleBar.TextTransparency = 1
ContentContainer.Visible = false
TabContainer.Visible = false

TweenService:Create(MainFrame, TweenInfo.new(1), {BackgroundTransparency = 0.3}):Play()
TweenService:Create(TitleBar, TweenInfo.new(1), {TextTransparency = 0}):Play()

task.wait(0.9)
ContentContainer.Visible = true
TabContainer.Visible = true

-- Toggle show/hide logic
local tweenInfo = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
local guiVisible = true

ToggleButton.MouseButton1Click:Connect(function()
	guiVisible = not guiVisible
	if guiVisible then
		TweenService:Create(MainFrame, tweenInfo, {Position = UDim2.new(0.5, -200, 0.5, -150)}):Play()
	else
		TweenService:Create(MainFrame, tweenInfo, {Position = UDim2.new(1.3, 0, 0.5, -150)}):Play()
	end
end)
